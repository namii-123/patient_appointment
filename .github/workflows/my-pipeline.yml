name: My CI/CD Pipeline  # Name sa imong pipeline

# Trigger: Mo-run every push sa main branch or pull request
on:
  push:
    branches: [ main ]  # Change to "master" or "login_register" if needed
  pull_request:
    branches: [ main ]

jobs:
  build-and-test:  # Job name
    runs-on: ubuntu-latest  # OS para sa runner

    steps:
      # 1. Checkout imong code
      - name: Checkout code
        uses: actions/checkout@v4

      # 2. Setup Node.js (para sa React/Vite, gamit Node 20.x or 22.x like sa imong previous)
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20.x'  # Or '22.x' if gusto nimo

      # 3. Install dependencies
      - name: Install dependencies
        run: npm install  # Or yarn install if using yarn

      # 4. Run tests (if naa ka tests, e.g., Vitest)
      - name: Run tests
        run: npm run test  # Skip if wala pa ka tests

      # 5. Build ang app
      - name: Build app
        run: npm run build

      # 6. (Optional) Deploy sa Netlify (if gusto nimo auto-deploy)
      - name: Deploy to Netlify
        if: github.ref == 'refs/heads/main'  # Run only sa main branch
        uses: nwtgck/actions-netlify@v3.0
        with:
          publish-dir: './dist'  # Para sa Vite build
          production-branch: main
          github-token: ${{ secrets.GITHUB_TOKEN }}
          deploy-message: "Deployed from GitHub Actions ðŸš€"
        env:
          NETLIFY_AUTH_TOKEN: ${{ nfp_62Us7ZQRdREWC7BRmrjtVCnsf9zNWMmK6084 }}
          NETLIFY_SITE_ID: ${{ ef4b8bcc-ddff-44df-9185-5a3a405376d6 }}
